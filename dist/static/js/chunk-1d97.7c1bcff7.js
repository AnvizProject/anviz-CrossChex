(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1d97"],{"2l+5":function(t,e,i){},"3N6m":function(t,e,i){},F9Ts:function(t,e,i){"use strict";var a=i("2l+5");i.n(a).a},grqc:function(t,e,i){"use strict";i.r(e);var a=i("P2sY"),s=i.n(a),n={props:{SupDeptid:{type:Number,default:null},row_data:{type:Object,default:function(){return{}}},de_data:{type:Number,default:null}},data:function(){return{dialogVisible:!1,showClo:!1,dialogtitle:"新增部门",form:{DeptName:"",SupDeptid:""}}},methods:{submit:function(){var t=this;console.log(this.row_data),this.form.SupDeptid=this.SupDeptid,console.log(this.form),1===this.de_data?this.$store.dispatch("interactive/Depart_create",this.form).then(function(e){t.dialogVisible=!1,t.row_data.children.push({label:t.form.DeptName,children:[],SupDeptid:e.dept.Deptid}),t.form.DeptName="",console.log(e)}).catch(function(t){console.log(t)}):0===this.de_data&&(this.form.Deptid=this.SupDeptid,console.log(this.form),this.$store.dispatch("interactive/Depart_update",this.form).then(function(e){t.dialogVisible=!1,t.$emit("form",t.form)}).catch(function(t){console.log(t)}))}}},l=(i("F9Ts"),i("KHd+")),o=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialogVisible,"show-close":t.showClo,width:"50%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("div",[t._v(t._s(t.dialogtitle))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1),t._v(" "),i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"部门名称"}},[i("el-input",{model:{value:t.form.DeptName,callback:function(e){t.$set(t.form,"DeptName",e)},expression:"form.DeptName"}})],1)],1)],1)},[],!1,null,"baa5f52a",null);o.options.__file="adddepartment.vue";var d=o.exports,r=1e3,c={props:{treeDataList:{type:Array,default:function(){}}},data:function(){return{selectedItem:"",selectedNode:""}},methods:{handleNodeClick:function(t){this.selectedItem=t,this.$emit("selectedItem",this.selectedItem),this.selectedNode=this.$refs.tree.getNode(t)},append:function(){var t={id:r++,label:"testtest",children:[]};this.selectedItem.children||this.$set(this.selectedItem,"children",[]),this.selectedItem.children.push(t)},remove:function(){var t=this;console.log(this.selectedNode);var e=this.selectedNode.parent,i=e.data.children||e.data,a=i.findIndex(function(e){return e.id===t.selectedItem.id});i.splice(a,1)}}},p=(i("vmeU"),Object(l.a)(c,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-tree",{ref:"tree",attrs:{data:this.treeDataList,"expand-on-click-node":!1,"node-key":"id"},on:{"node-click":this.handleNodeClick}})],1)},[],!1,null,"61cc0f20",null));p.options.__file="index.vue";var u={components:{Dialog:d,tree:p.exports},data:function(){return{data:[],list:[],input:"",depart_title:"",de_data:null,SupDeptid:null,Deptid:0,row_data:null,circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},mounted:function(){this.depart_list()},methods:{depart_list:function(){var t=this;this.$store.dispatch("interactive/Depart_list",{}).then(function(e){t.list=e.dept,t.Tree(e.dept_tree,t.data),t.depart_title=e.dept_tree[0].DeptName,t.SupDeptid=e.dept_tree[0].Deptid,t.Deptid=e.dept_tree[0].Deptid,t.row_data=s()({},t.data[0])}).catch(function(t){console.log(t)})},Tree:function(t,e){var i=this;t.forEach(function(t,a){t.SubDept&&null!==t.SupDeptid&&(e.push({label:t.DeptName,children:[],id:t.Deptid,SupDeptid:t.SupDeptid}),i.Tree(t.SubDept,e[a].children))})},add:function(){this.$refs.Dialog.dialogVisible=!0,this.$refs.Dialog.dialogtitle="新增部门",this.de_data=1},modify:function(){this.$refs.Dialog.dialogVisible=!0,this.$refs.Dialog.dialogtitle="修改部门",this.de_data=0,this.$refs.Dialog.form.DeptName=this.depart_title},depart_del:function(){var t=this;this.$confirm("是否确定删除此部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("interactive/Depart_delete",{Deptid:t.Deptid}).then(function(e){t.$refs.tree.remove(),t.$message({type:"success",message:"删除成功!"})}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"已取 消删除"})})},handleNodeClick:function(t){this.depart_title=t.label,this.SupDeptid=t.Deptid,this.Deptid=t.Deptid,this.row_data=t},form:function(t){this.data[0].label=t.DeptName}}},v=(i("w1gG"),Object(l.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"department app-container"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:4}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-input",{attrs:{size:"mini",placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),i("tree",{ref:"tree",attrs:{"tree-data-list":t.data},on:{selectedItem:t.handleNodeClick}})],1)]),t._v(" "),i("el-col",{attrs:{span:20}},[i("div",{staticClass:"grid-content bg-purple-light"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.depart_title))])]),t._v(" "),i("div",{staticClass:"text item"},[i("p",{staticClass:"fun-btn"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.add}},[t._v("新增")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.modify}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.depart_del}},[t._v("删除")])],1)]),t._v(" "),i("div",{staticClass:"business-card"},[i("div",{staticClass:"business-card-item"},[i("span",[i("div",{staticClass:"block"},[i("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1)]),t._v(" "),i("span",[i("div",[t._v("yaobo")]),t._v(" "),i("div",{staticClass:"name-num"},[i("span",[t._v("研发部")]),t._v(" "),i("span",[t._v("80685")])])])]),t._v(" "),i("div",{staticClass:"business-card-item"},[i("span",[i("div",{staticClass:"block"},[i("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1)]),t._v(" "),i("span",[i("div",[t._v("yaobo")]),t._v(" "),i("div",{staticClass:"name-num"},[i("span",[t._v("研发部")]),t._v(" "),i("span",[t._v("80685")])])])]),t._v(" "),i("div",{staticClass:"business-card-item"},[i("span",[i("div",{staticClass:"block"},[i("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1)]),t._v(" "),i("span",[i("div",[t._v("yaobo")]),t._v(" "),i("div",{staticClass:"name-num"},[i("span",[t._v("研发部")]),t._v(" "),i("span",[t._v("80685")])])])]),t._v(" "),i("div",{staticClass:"business-card-item"},[i("span",[i("div",{staticClass:"block"},[i("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1)]),t._v(" "),i("span",[i("div",[t._v("yaobo")]),t._v(" "),i("div",{staticClass:"name-num"},[i("span",[t._v("研发部")]),t._v(" "),i("span",[t._v("80685")])])])]),t._v(" "),i("div",{staticClass:"business-card-item"},[i("span",[i("div",{staticClass:"block"},[i("el-avatar",{attrs:{size:70,src:t.circleUrl}})],1)]),t._v(" "),i("span",[i("div",[t._v("yaobo")]),t._v(" "),i("div",{staticClass:"name-num"},[i("span",[t._v("研发部")]),t._v(" "),i("span",[t._v("80685")])])])])])])],1)])],1),t._v(" "),i("Dialog",{ref:"Dialog",attrs:{SupDeptid:t.SupDeptid,row_data:t.row_data,de_data:t.de_data},on:{form:t.form}})],1)},[],!1,null,"3c436e1c",null));v.options.__file="index.vue";e.default=v.exports},uHdL:function(t,e,i){},vmeU:function(t,e,i){"use strict";var a=i("3N6m");i.n(a).a},w1gG:function(t,e,i){"use strict";var a=i("uHdL");i.n(a).a}}]);